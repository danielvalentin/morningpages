require.config({paths:{knockout:"vendor/knockout",jquery:"//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min",autogrow:"vendor/jquery.autosize",validate:"vendor/jquery.validate.min",jgrowl:"vendor/jgrowl.min"},shim:{autogrow:{deps:["jquery"]},validate:{deps:["jquery"]},jgrowl:{deps:["jquery"]}}}),define(["knockout","jquery","bindings","models/user","models/modal","site"],function(e,$,o,t,n,a){var r=function(){var o=this;o.user=new t,o.user.getInfo().then(function(){o.writtenwords("")}),o.optionsmodal=new n($("#user-options-modal")),o.shortcutsmodal=new n($("#shortcuts-modal")),o.writtenwords=e.observable(""),o.totalwords=e.observable(0),o.wordcount=e.computed(function(){var e=$.trim(o.writtenwords()).split(/\s+/).length;return 0==o.writtenwords().length&&(e=0),e+=parseInt(o.user.wordcount()),o.totalwords(e),e},this),$(document).on("keydown",function(e){e.ctrlKey&&32==e.keyCode&&($("#page-content").toggle(),$("#writeform").toggle(),$("#dummy-content").toggle(),$("#sidebar").toggle(),$("#header").toggle(),$("#user-options").hide())}),o.hamburgerClick=function(){$("#user-options-triangle").show(),$("#user-options").slideToggle("slow",function(){$("#user-options").is(":visible")||$("#user-options-triangle").hide()})},o.saveUserInfo=function(){o.user.saveInfo().then(function(e){o.optionsmodal.hide(),a.say("Your settings have been saved.")})},o.goToPreviousPage=function(e,o){var t=$(o.target).val();0!=$(o.target).val()&&(window.location.href="/write/"+t)},$(".modal-tabbed-nav ul li").click(function(e){e.preventDefault(),$(".modal-tabbed-nav ul li.active-tab").removeClass("active-tab"),$(this).addClass("active-tab"),$(".user-options-modal-body").hide(),"personal-settings"==$(".active-tab a").attr("href")?$(".personal-settings").show():"change-password"==$(".active-tab a").attr("href")?$(".change-password").show():"delete-account"==$(".active-tab a").attr("href")&&$(".delete-account").show()})};e.applyBindings(new r)});