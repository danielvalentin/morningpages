<?php defined('SYSPATH') or die('No direct script access.');class Model_Contenttype extends ORM {		protected $_has_many = array(		'contents' => array(),		'blocktypes' => array(),		'categories' => array(),		'contenttypetypes' => array()	);		protected $_sorting = array(		'order' => 'ASC'	);		public function supports($feature)	{		switch($feature)		{			case 'categories':				return (bool)$this->has_categories;				break;			case 'timestamp':				return (bool)$this->has_timestamp;				break;			case 'tags':				return (bool)$this->has_tags;				break;			case 'thumbnail':				return (bool)$this->has_thumbnail;				break;			case 'hierarchy':				return (bool)$this->hierarchical;				break;			case 'author':				return (bool)$this->has_author;				break;			case 'status':				return (bool)$this->has_status;				break;		}		return false;	}		public function info()	{		$typetypes = array();		if((bool)$this->contenttypetypes->count_all())		{			foreach($this->contenttypetypes->find_all() as $contenttypetype)			{				$typetypes[] = $contenttypetype->info();			}		}		return array(			'id' => $this->id,			'type' => $this->type,			'slug' => $this->slug,			'icon' => $this->icon,			'max' => $this->max,			'supports' => array(				'categories' => $this->supports('categories'),				'timestamp' => $this->supports('timestamp'),				'tags' => $this->supports('tags'),				'thumbnail' => $this->supports('thumbnail'),				'hierarchy' => $this->supports('hierarchy'),				'author' => $this->supports('author'),				'status' => $this->supports('status')			),			'order' => $this->order,			'display' => $this->display,			'contenttypetypes' => $typetypes		);	}		public function baseinfo()	{		return array(			'id' => $this->id,			'type' => $this->type,			'slug' => $this->slug,			'icon' => $this->icon,			'max' => $this->max,			'supports' => array(				'categories' => $this->supports('categories'),				'timestamp' => $this->supports('timestamp'),				'tags' => $this->supports('tags'),				'thumbnail' => $this->supports('thumbnail'),				'hierarchy' => $this->supports('hierarchy'),				'author' => $this->supports('author'),				'status' => $this->supports('status')			),			'order' => $this->order,			'display' => $this->display		);	}		public function delete()	{		if((bool)$this->contenttypetypes->count_all())		{			foreach($this->contenttypetypes->find_all() as $contenttypetype)			{				$contenttypetype->delete();			}		}		return parent::delete();	}	}